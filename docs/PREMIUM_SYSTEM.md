# ุณุณุชู ูพุฑููู AI Subtitle Converter ๐

ุงู ูุณุชูุฏ ุณุณุชู ฺฉุงูู ุงุดุชุฑุงฺฉุ ูุฏุฑุช ฺฉุงุฑุจุฑุงู ู ูพูู ุงุฏูู ุฑุง ุดุฑุญ ูโุฏูุฏ.

## ๐๏ธ ูุนูุงุฑ ุณุณุชู

### ุงุฌุฒุง ุงุตู:
- **DatabaseManager**: ูุฏุฑุช ูพุงฺฏุงู ุฏุงุฏู SQLite
- **UserService**: ุณุฑูุณ ูุฏุฑุช ฺฉุงุฑุจุฑุงู ู ุงุดุชุฑุงฺฉโูุง
- **AdminService**: ุณุฑูุณ ูุฏุฑุช ุงุฏููโูุง
- **TelegramBotPremium**: ุฑุจุงุช ุชูฺฏุฑุงู ุจุง ูุงุจูุชโูุง ูพุฑููู

### ุณุงุฎุชุงุฑ ุฏุชุงุจุณ:
```sql
-- ฺฉุงุฑุจุฑุงู
users (user_id, username, first_name, last_name, role, created_at, 
       last_activity, is_active, free_translations_used, total_translations, settings)

-- ุงุดุชุฑุงฺฉโูุง
subscriptions (id, user_id, plan_type, status, start_date, end_date, 
               price, payment_method, created_at)

-- ุชุฑุงฺฉูุดโูุง
transactions (id, user_id, file_name, file_size, processing_time, 
              status, created_at)

-- ุงุฏููโูุง
admins (user_id, permissions, added_by, added_at)

-- ุชูุธูุงุช ุณุณุชู
system_settings (key, value, updated_at)
```

## ๐ฅ ุณุณุชู ฺฉุงุฑุจุฑุงู

### ููุดโูุง ฺฉุงุฑุจุฑ:
- **๐ Free**: ฺฉุงุฑุจุฑ ุฑุงฺฏุงู (1 ุชุฑุฌูู)
- **๐ Premium**: ฺฉุงุฑุจุฑ ูพุฑููู (ุชุฑุฌูู ูุงูุญุฏูุฏ)
- **๐ Admin**: ูุฏุฑ ุณุณุชู

### ูุฑุขูุฏ ุซุจุชโูุงู:
1. ฺฉุงุฑุจุฑ `/start` ูโุฒูุฏ
2. ุณุณุชู ฺฉุงุฑุจุฑ ุฑุง ุซุจุช ูโฺฉูุฏ
3. 1 ุชุฑุฌูู ุฑุงฺฏุงู ุงุนุทุง ูโุดูุฏ
4. ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ูุงู ุงุฑุณุงู ฺฉูุฏ

### ูุฏุฑุช ุชุฑุฌููโูุง ุฑุงฺฏุงู:
```python
# ุจุฑุฑุณ ูุฌูุฒ ุชุฑุฌูู
permission = await user_service.check_translation_permission(user_id)

if permission['allowed']:
    if permission['type'] == 'free':
        # ุชุฑุฌูู ุฑุงฺฏุงู
        remaining = permission['remaining_free']
    elif permission['type'] == 'premium':
        # ุชุฑุฌูู ูุงูุญุฏูุฏ
        pass
else:
    # ูุงุฒ ุจู ุฎุฑุฏ ุงุดุชุฑุงฺฉ
    reason = permission['reason']
```

## ๐ณ ุณุณุชู ุงุดุชุฑุงฺฉ

### ุทุฑุญโูุง ุงุดุชุฑุงฺฉ:

#### ๐ ูุงูุงูู:
- **ููุช**: 50,000 ุชููุงู
- **ูุฏุช**: 30 ุฑูุฒ
- **ูฺฺฏโูุง**: ุชุฑุฌูู ูุงูุญุฏูุฏุ ูพุดุชุจุงู ุงูููุชโุฏุงุฑ

#### ๐ ุณุงูุงูู:
- **ููุช**: 500,000 ุชููุงู (17% ุชุฎูู)
- **ูุฏุช**: 365 ุฑูุฒ
- **ูฺฺฏโูุง**: ููู ูฺฺฏโูุง ูุงูุงูู + ุชุฎูู

### ูุฑุขูุฏ ุฎุฑุฏ:
1. ฺฉุงุฑุจุฑ `/subscribe` ูโุฒูุฏ
2. ุทุฑุญโูุง ููุฌูุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ
3. ฺฉุงุฑุจุฑ ุทุฑุญ ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ
4. ูพุฑุฏุงุฎุช ุงูุฌุงู ูโุดูุฏ (ุดุจูโุณุงุฒ ุดุฏู)
5. ุงุดุชุฑุงฺฉ ูุนุงู ูโุดูุฏ

### ฺฉุฏ ููููู:
```python
# ุฎุฑุฏ ุงุดุชุฑุงฺฉ
result = await user_service.create_subscription(user_id, "monthly")

if result['success']:
    # ุงุดุชุฑุงฺฉ ูุนุงู ุดุฏ
    message = result['message']
else:
    # ุฎุทุง ุฏุฑ ุฎุฑุฏ
    error = result['message']
```

## ๐ ุณุณุชู ูุฏุฑุช

### ุณุทูุญ ุฏุณุชุฑุณ:
- **Super Admin**: ุงุฏููโูุง ุงููู (ุงุฒ .env)
- **Admin**: ุงุฏููโูุง ุงุถุงูู ุดุฏู

### ุฏุณุชูุฑุงุช ุงุฏูู:

#### `/admin` - ูพูู ูุฏุฑุช
ููุงุด ุฏุณุชูุฑุงุช ููุฌูุฏ ุจุฑุง ุงุฏูู

#### `/stats` - ุขูุงุฑ ุณุณุชู
```
๐ ุขูุงุฑ ุณุณุชู
ฺฉุงุฑุจุฑุงู:
โข ฺฉู: 1,250
โข ูพุฑููู: 320
โข ุฑุงฺฏุงู: 930

ุชุฑุงฺฉูุดโูุง:
โข ฺฉู: 5,680
โข ููุชู ฺฏุฐุดุชู: 245

ุฏุฑุขูุฏ:
โข ฺฉู: 16,000,000 ุชููุงู
```

#### `/users` - ูุณุช ฺฉุงุฑุจุฑุงู
ููุงุด 10 ฺฉุงุฑุจุฑ ุงุฎุฑ ุจุง ููุดโูุงุดุงู

#### `/addadmin [user_id]` - ุงุถุงูู ฺฉุฑุฏู ุงุฏูู
```bash
/addadmin 123456789
```

#### `/grant [user_id] [plan]` - ุงุนุทุง ุงุดุชุฑุงฺฉ ุฑุงฺฏุงู
```bash
/grant 123456789 monthly
/grant 987654321 yearly
```

### ฺฉุฏ ููููู ุงุฏูู:
```python
# ุจุฑุฑุณ ุงุฏูู ุจูุฏู
if await admin_service.is_admin(user_id):
    # ุฏุณุชุฑุณ ุจู ุนููุงุช ุงุฏูู
    stats = await admin_service.get_system_stats()
    users = await admin_service.get_users_list()
```

## ๐ง ุชูุธูุงุช ุณุณุชู

### ูุงู .env:
```env
# ุงุฏููโูุง ุงููู (ฺฉุงูุง ุฌุฏุง)
SUPER_ADMIN_IDS=123456789,987654321

# ูุญุฏูุฏุช ุชุฑุฌูู ุฑุงฺฏุงู
FREE_TRANSLATIONS_LIMIT=1

# ูุณุฑ ุฏุชุงุจุณ
DATABASE_PATH=./aisubconvertor.db
```

### ุชูุธูุงุช ุทุฑุญโูุง ุงุดุชุฑุงฺฉ:
```python
subscription_plans = {
    'monthly': {
        'name': 'ุงุดุชุฑุงฺฉ ูุงูุงูู',
        'duration_days': 30,
        'price': 50000,
        'features': ['ุชุฑุฌูู ูุงูุญุฏูุฏ', 'ูพุดุชุจุงู ุงูููุชโุฏุงุฑ']
    },
    'yearly': {
        'name': 'ุงุดุชุฑุงฺฉ ุณุงูุงูู', 
        'duration_days': 365,
        'price': 500000,
        'features': ['ุชุฑุฌูู ูุงูุญุฏูุฏ', 'ูพุดุชุจุงู ุง๏ฟฝ๏ฟฝููุชโุฏุงุฑ', '17% ุชุฎูู']
    }
}
```

## ๐ ุฑุงูโุงูุฏุงุฒ

### 1. ุชูุธู ุงุฏููโูุง:
```env
# ุฏุฑ ูุงู .env
SUPER_ADMIN_IDS=YOUR_USER_ID,ANOTHER_ADMIN_ID
```

### 2. ุงุฌุฑุง ุฑุจุงุช:
```bash
python main.py
```

### 3. ุชุณุช ุณุณุชู:
```bash
python tests/test_premium_system.py
```

## ๐ฑ ุชุฌุฑุจู ฺฉุงุฑุจุฑ

### ฺฉุงุฑุจุฑ ุฌุฏุฏ:
1. `/start` โ ุซุจุชโูุงู + 1 ุชุฑุฌูู ุฑุงฺฏุงู
2. ุงุฑุณุงู ูุงู โ ุชุฑุฌูู ูููู
3. ุงุฑุณุงู ูุงู ุฏูู โ ูพุงู ูุงุฒ ุจู ุงุดุชุฑุงฺฉ
4. `/subscribe` โ ุฎุฑุฏ ุงุดุชุฑุงฺฉ
5. ุงุฑุณุงู ูุงู โ ุชุฑุฌูู ูุงูุญุฏูุฏ

### ฺฉุงุฑุจุฑ ูพุฑููู:
1. ุงุฑุณุงู ูุงู โ ุชุฑุฌูู ููุฑ
2. `/profile` โ ูุดุงูุฏู ูุถุนุช ุงุดุชุฑุงฺฉ
3. ุฏุฑุงูุช ุงุทูุงุนุงุช ุจุงูโูุงูุฏู ุฑูุฒูุง ุงุดุชุฑุงฺฉ

### ุงุฏูู:
1. `/admin` โ ุฏุณุชุฑุณ ุจู ูพูู ูุฏุฑุช
2. `/stats` โ ูุดุงูุฏู ุขูุงุฑ ฺฉุงูู
3. `/grant user_id monthly` โ ุงุนุทุง ุงุดุชุฑุงฺฉ ุฑุงฺฏุงู
4. `/addadmin user_id` โ ุงุถุงูู ฺฉุฑุฏู ุงุฏูู ุฌุฏุฏ

## ๐ ุงููุช

### ูุญุงูุธุช ุงุฒ ุฏุชุงุจุณ:
- ุงุณุชูุงุฏู ุงุฒ SQLite ุจุง ุชุฑุงฺฉูุดโูุง ุงูู
- Prepared statements ุจุฑุง ุฌููฺฏุฑ ุงุฒ SQL Injection
- ุฑูุฒฺฏุฐุงุฑ ุงุทูุงุนุงุช ุญุณุงุณ (ุฏุฑ ูุณุฎูโูุง ุขูุฏู)

### ฺฉูุชุฑู ุฏุณุชุฑุณ:
- ุจุฑุฑุณ ูุฌูุฒ ุฏุฑ ูุฑ ุฏุฑุฎูุงุณุช
- ุฌุฏุงุณุงุฒ ฺฉุงูู ฺฉุงุฑุจุฑุงู
- ูุงฺฏ ุชูุงู ุนููุงุช ููู

### ูุญุฏูุฏุชโูุง:
- ฺฉ ูุงู ููุฒูุงู ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ
- ูุญุฏูุฏุช ุญุฌู ูุงู
- Rate limiting (ุฏุฑ ูุณุฎูโูุง ุขูุฏู)

## ๐ ูุงูุชูุฑูฺฏ

### ูุงฺฏโูุง ููู:
```
INFO - User 123456789 registered successfully
INFO - Subscription created for user 123456789: monthly
INFO - Translation completed for user 123456789: 5.2s
WARNING - User 987654321 exceeded free limit
ERROR - Payment failed for user 555555555
```

### ุขูุงุฑ ูุงุจู ุฑุฏุงุจ:
- ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ุฌุฏุฏ ุฑูุฒุงูู
- ูุฑุฎ ุชุจุฏู ุงุฒ ุฑุงฺฏุงู ุจู ูพุฑููู
- ูุงูฺฏู ุฒูุงู ูพุฑุฏุงุฒุด
- ุฏุฑุขูุฏ ุฑูุฒุงูู/ูุงูุงูู

## ๐ฎ ูฺฺฏโูุง ุขูุฏู

### ูพุฑุฏุงุฎุช ูุงูุน:
- ุงุชุตุงู ุจู ุฏุฑฺฏุงูโูุง ูพุฑุฏุงุฎุช ุงุฑุงู
- ูพุดุชุจุงู ุงุฒ ฺฉุงุฑุชโูุง ุจุงูฺฉ
- ฺฉู ูพูู ุฏุงุฎู

### ูฺฺฏโูุง ูพุดุฑูุชู:
- ฺฉุฏ ุชุฎูู
- ุจุฑูุงูู ุงุฑุฌุงุน ุฏูุณุชุงู
- ุงุดุชุฑุงฺฉ ฺฏุฑูู
- API ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู

### ุจูุจูุฏูุง ุนููฺฉุฑุฏ:
- ฺฉุด Redis
- Queue system
- Load balancing
- CDN ุจุฑุง ูุงูโูุง

---

**ุงู ุณุณุชู ุขูุงุฏู ุชููุฏ ู ูุงุจู ููุงุณโฺฏุฐุงุฑ ุงุณุช.**